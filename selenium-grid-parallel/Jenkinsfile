
pipeline {
    agent any

    environment {
        GRID_URL = "http://localhost:4444/wd/hub"
    }
    tools {
        maven 'Maven'
        jdk 'JAVA_HOME'
    }
    
    parameters {
        string(name: 'Branch_Name', defaultValue: 'master', description: 'Git Branch to be built')
        booleanParam(name: 'STOP_GRID_AFTER_RUN', defaultValue: false, description: 'Stop Selenium Grid after tests')
    }

    stages {
        
       
        
        stage('Log Stop Request') {
    		steps {
       			 echo "Checking if we need to stop Selenium Grid... STOP_GRID_AFTER_RUN - ${params.STOP_GRID_AFTER_RUN}"
   			 }
		}
		 
         stage('Parse XML without readXML') {
            steps {
                script {
                    def xmlText = readFile 'selenium-grid-parallel/target/surefire-reports/testng-results.xml'// Read raw XML from workspace file
                    def root = new XmlSlurper().parseText(xmlText)

                    // Example: access elements
                    def nameValue = root.name.text()
                    echo "Name from XML: ${nameValue}"

                    // Iterate over elements
                    root.items.item.each { item ->
                        echo "Item: ${item.text()}"
                    }
                }
            }
        }

		
        
    }

   
    
     
}
